[{{:uplevel.png?direct&20|}}](contents_rus)
[{{:flag_rus.png?direct&20|}}](soft_queen_sound_rus)
[{{:flag_eng.png?direct&20|}}](soft_queen_sound_eng)

====== Настройка queen sound ======  

**Queen sound** предназначено для добавления дополнительных звуковых каналов в системе. Решение является достаточно емким, но весьма гибким и хорошо подходит для случаев создания полноценных звуковых систем квеста (оформление целой комнаты или большого гаджета).  

===== Перечень оборудования =====  

| **устройство**             | **фото**                      | **комментарии, требования, модель** |
| 1. **Сетевой фильтр**      |  {{:photo:power-strip-2.jpg?direct&100|}} | |
| 2. **Процессорный модуль** |  |  |
| 2.1. Raspberry Pi          | {{:photo:raspberry_pi_3_1.jpg?direct&200|}} | модель : raspberry pi 3 model B |
| 2.2. micro-SD card         | {{ :photo:microsd-1.jpg?direct&40 |}} | SD-карта для RPI, class 10, 8GB |
| 2.3. RPI адаптер питания   | {{ :photo:ac_dc_adapter_1.jpg?direct&60 |}} | адаптер питания для raspberry pi, 5V, 2-3A, microUSB |
| 3. **Audio**               |  |  |
| 3.1. Audio усилитель       | {{ :photo:tda7498.png?200 |}} | модель : TDA7498 chip based amplifier |
| 3.2. USB sound card        | {{ :photo:usb-audio-1.jpg?direct&100 |}} | модель : creative SB play 3 |
| 3.3. 24VDC                 | {{ :photo:12vdc-ps-1.jpg?direct&200 |}} | требования > 200W |
| 3.4. minijack3.5 to 2xRCA | {{ :photo:minijack_2rca.jpg?100 |}} |  |

подключение динамиков, параметры оборудования и некоторые расчеты приводятся **[здесь](hw_plug_sound_rus)**, но если есть просто два динамика, то достаточно подключить просто по одному динамику на каждый из двух выходных каналов усилителя.  


===== Подготовка raspberry pi =====  

Необходимо подготовить raspberry pi. Для этого сначала нужно загрузить операционную систему, используя **[инструкцию по заливке образа](rpi_image_upload_rus)**, а затем установить нужный IP адрес сети, используя **[эту инструкцию](rpi_ip_setup_rus)**. После этого следует скопировать в папку **/home/pi/queen/queen\_sound** последнюю версию программы queen\_sound, используя **[инструкцию по загрузке программ](rpi_soft_install_rus)**, только заливать будем программу **queen\_sound** и необходимые звуковые файлы.  


Далее необходимо скопировать программу queen sound на raspberry pi. Для этого создайте папку **queen\_sound** в домашней папке **(/home/pi)**. Далее скопируйте туда программу **queen\_sound**, файл конфигурации **queen\_sound.cfg** и тестовый файл **sound\_check.mp3**. Используйте **[инструкцию по копированию](rpi_ftp_ssh_setup_rus)**.  


Конфигурирование осуществляется в файле **queen\_sound.cfg**. Для Raspberry Pi действует только один параметр own=ip:port. Его рекомендуем оставить по умолчанию.  


Далее необходимо установить атрибут файла **queen\_sound** для возможности запуска. Для этого нужно правой кнопкой мыши кликнуть по файлу и в меню выбрать “Properties”. Перейти на вкладку “Permissions” открывшегося диалога “File properties” и установить Execute = Anyone, затем нажать “Enter”:  
![](:screen:rpi_fileprops.jpg)  




===== Подключение и проверка =====  

Для проигрывания видео создайте в queen\_studio компонент типа "adapter" и установите у него hwtype=sound, а в качестве IP адреса нужно указать IP адрес raspberry, на котором будет запущен queen\_sound, port=4455. Далее, запустив queen room, нужно убедиться, что связь с queen sound установилась (адаптер стал зеленым), и двойным кликом вызвать меню, зайти в подменю "play" и выбрать нужный файл sound\_check.mp3 для проигрывания (файл должен быть скопирован заранее). Для Raspberry Pi queen sound проигрывает sound check.mp3 на всех каналах (audio, hdmi, usb, … ), а для Windows только на устройствах, указанных в queen\_sound.cfg. Для Raspberry Pi файл конфигурации queen\_sound.cfg в принципе не нужен.  




